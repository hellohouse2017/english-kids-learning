<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹¼å­—å¤§å†’éšª RPG</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>

    <div id="start-screen" class="overlay">
        <div class="modal start-modal">
            <h1>ğŸ® æ­¡è¿ä¾†åˆ°æ‹¼å­—å†’éšªï¼</h1>
            
            <div class="input-group">
                <label>å‹‡è€…çš„åå­—ï¼š</label>
                <input type="text" id="player-name-input" placeholder="è«‹è¼¸å…¥è‹±æ–‡åå­—" maxlength="10">
            </div>

            <p>è«‹é¸æ“‡è€å¸«çš„è²éŸ³ï¼š</p>
            <div class="voice-selection">
                <button onclick="goToCategorySelect('male')" class="btn-voice male">
                    <span>ğŸ‘¦</span> ç”·ç”Ÿ
                </button>
                <button onclick="goToCategorySelect('female')" class="btn-voice female">
                    <span>ğŸ‘§</span> å¥³ç”Ÿ
                </button>
            </div>
            <p style="font-size:0.8rem; color:#888; margin-top:15px;">*è«‹é–‹å•Ÿè²éŸ³ä»¥ç²å¾—æœ€ä½³é«”é©—</p>
        </div>
    </div>

    <div id="category-screen" class="overlay" style="display:none;">
        <div class="modal category-modal">
            <h2>ğŸŒ è«‹å•ä»Šå¤©è¦æŒ‘æˆ°å“ªè£¡ï¼Ÿ</h2>
            <div class="category-grid">
                <button onclick="startGame('ALL')" class="btn-cat rainbow">ğŸ² å…¨éƒ¨éš¨æ©Ÿ</button>
                <button onclick="startGame('animal')" class="btn-cat">ğŸ¶ å‹•ç‰©åœ’</button>
                <button onclick="startGame('food')" class="btn-cat">ğŸ ç¾é£Ÿè¡—</button>
                <button onclick="startGame('color')" class="btn-cat">ğŸ¨ é¡è‰²é¤¨</button>
                <button onclick="startGame('number')" class="btn-cat">ğŸ”¢ æ•¸å­—è°·</button>
                <button onclick="startGame('body')" class="btn-cat">ğŸ‘€ èº«é«”æª¢æŸ¥</button>
                <button onclick="startGame('item')" class="btn-cat">ğŸ’ ç”Ÿæ´»ç”¨å“</button>
            </div>
        </div>
    </div>

    <div class="game-hud" id="hud" style="display:none;">
        <div class="top-row">
            <div class="player-info">
                <span id="player-name-display" class="player-name">Player</span>
                <span class="level-badge">Lv. <span id="level-display">1</span></span>
            </div>
            
            <div class="hp-container" id="hp-display">â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸â¤ï¸</div>
            
            <div class="item-container">
                ğŸŸï¸ åˆ¸: <span id="ticket-count">0</span>
            </div>

            <a href="index.html" class="btn-home">ğŸ  é›¢é–‹</a>
        </div>

        <div class="xp-bar-container">
            <div class="xp-bar-fill" id="xp-bar" style="width: 0%;"></div>
            <div class="xp-text-overlay"><span id="xp-current">0</span> / <span id="xp-max">100</span> XP</div>
        </div>
        
        <div id="combo-display" class="combo-text">Combo x2!</div>
    </div>

    <div class="container" id="game-container" style="display:none;">
        
        <div class="dashboard-wrapper">
            <div class="house-section">
                <div id="house-msg" class="house-bubble">ä¸€èµ·è“‹æˆ¿å­å§ï¼ğŸ’ª</div>
                <div class="house-wrapper">
                    <div id="my-house-icon" class="house-icon">ğŸŒ²</div>
                    <div class="house-base"></div>
                </div>
                <div class="house-info">
                    <div id="house-name" class="house-title">è’é‡æ¨¹æ—</div>
                    <p class="next-level-hint">åŠªåŠ›å‡ç´šä¾†é–‹ç™¼åœŸåœ°ï¼</p>
                </div>
            </div>

            <div class="game-rules-panel">
                <h3>ğŸ“œ å†’éšªæŒ‡å—</h3>
                <ul>
                    <li>â¤ï¸ <b>ç”Ÿå‘½ï¼š</b> ç­”éŒ¯æ‰£ 1 é¡†å¿ƒã€‚</li>
                    <li>ğŸ—ï¸ <b>å»ºè¨­ï¼š</b> ç¶“é©—å€¼è¶Šé«˜ï¼Œæˆ¿å­è¶Šè±ªè¯ï¼</li>
                    <li>ğŸŸï¸ <b>çå‹µï¼š</b> å‡ç´šæœƒé€ã€Œå…è²»å·çœ‹åˆ¸ã€ï¼</li>
                    <li>ğŸ”’ <b>é˜²äº‚çŒœï¼š</b> ç­”éŒ¯æœƒæš«åœ 1.5 ç§’ã€‚</li>
                    <li>ğŸ”„ <b>é­”ç‹é—œï¼š</b> å‡ç´šå‰è¦è¤‡ç¿’éŒ¯å­—ã€‚</li>
                </ul>
            </div>
        </div>

        <div class="game-stage">
            <div class="question-header">
                <span id="category-tag" class="q-tag">éš¨æ©ŸæŒ‘æˆ°</span>
                <span style="font-weight:bold; color:#aaa;">Q.<span id="q-count">1</span></span>
            </div>
            
            <div class="question-area">
                <div id="image-area" class="big-icon">â“</div>
                <div id="cn-meaning" class="cn-text">è˜‹æœ</div>
                <div id="hint-overlay" class="hint-text">APPLE</div>

                <div class="btn-group">
                    <button onclick="playCurrentWord()" class="btn-replay">ğŸ”Š å†å”¸ä¸€æ¬¡</button>
                    <button onclick="showHint()" id="btn-hint" class="btn-hint">ğŸ’¡ å·çœ‹ (-0.5â¤)</button>
                </div>
            </div>

            <div id="answer-slots" class="slots-container"></div>

            <div class="control-row">
    <button onclick="backspace()" class="btn-backspace">âŒ« é€€æ ¼</button>
    <button onclick="resetInput()" class="btn-clear" id="btn-clear">ğŸ§¹ å…¨éƒ¨é‡å¯«</button>
</div>

            <div id="letter-pool" class="pool-container"></div>
            
            <div id="freeze-overlay" class="freeze-msg" style="display:none;">ğŸ”’ æƒ³ä¸€ä¸‹å†æŒ‰ï¼</div>
            <div id="message-area" class="result-msg"></div>

            <button onclick="nextQuestion()" id="next-btn" class="btn-next" style="display:none;">ä¸‹ä¸€é—œ â”</button>
        </div>
    </div>

    <div id="levelup-modal" class="overlay" style="display:none;">
        <div class="modal levelup-card">
            <div class="levelup-header">ğŸ‰ LEVEL UP!</div>
            <div class="levelup-icon">ğŸ†™</div>
            <h2 id="levelup-title">æ­å–œå‡ç´šï¼</h2>
            
            <p style="color:#666; margin:5px 0;">å ´æ™¯è®ŠåŒ–äº†ï¼</p>
            <div id="levelup-house" class="new-house-icon">ğŸ›–</div>
            
            <div class="reward-box">
                <p>ğŸ ç²å¾—çå‹µï¼š</p>
                <div class="reward-item">â¤ï¸ ç”Ÿå‘½å…¨æ»¿</div>
                <div class="reward-item">ğŸŸï¸ å…è²»æç¤ºåˆ¸ x 1</div>
            </div>
            
            <button onclick="closeLevelUpModal()" class="btn-confirm">æ”¶ä¸‹çå‹µï¼</button>
        </div>
    </div>

    <script src="game.js"></script>

<footer class="game-footer">
        <div class="footer-content">
            <div class="counter-box">
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                
                <span id="busuanzi_container_site_pv" style="display:none">
                    ğŸ‘€ æœ¬ç«™ç¸½ç€è¦½äººæ¬¡ï¼š<span id="busuanzi_value_site_pv" class="highlight-num">...</span> æ¬¡
                </span>
            </div>

            <div class="date-box">
                ğŸ•’ æœ€å¾Œæ›´æ–°ï¼š<span id="last-updated">è®€å–ä¸­...</span>
            </div>
            
            <p class="copyright">Â© 2024 Happy English RPG. Keep Learning!</p>
        </div>
    </footer>

    <script src="game.js"></script>
    
    <script>
        // æŠ“å–ç¶²é æœ€å¾Œä¿®æ”¹æ™‚é–“
        const date = new Date(document.lastModified);
        
        // æ ¼å¼åŒ–æ—¥æœŸ (YYYY/MM/DD HH:mm)
        const year = date.getFullYear();
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const day = date.getDate().toString().padStart(2, '0');
        const hours = date.getHours().toString().padStart(2, '0');
        const minutes = date.getMinutes().toString().padStart(2, '0');
        
        const formattedDate = `${year}/${month}/${day} ${hours}:${minutes}`;
        
        document.getElementById('last-updated').innerText = formattedDate;
    </script>
</body>
</html>