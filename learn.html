<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–®å­—å¡å­¸ç¿’ | Vocabulary Cards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                        game: ['"Fredoka"', 'sans-serif'],
                    },
                    colors: {
                        primary: '#10b981', // Emerald 500
                        secondary: '#3b82f6', // Blue 500
                        bg: '#f0fdf4', // Green 50
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #f0fdf4; }
        .vocab-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border-bottom: 4px solid #e5e7eb;
        }
        .vocab-card:active {
            transform: translateY(4px);
            border-bottom-width: 0px;
            box-shadow: none !important;
        }
        .vocab-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
            border-color: #10b981;
        }
        /* éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col font-sans text-gray-800">

    <header class="bg-white shadow-sm sticky top-0 z-20">
        <div class="max-w-5xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <span class="text-3xl">ğŸ“–</span>
                <h1 class="text-xl font-bold tracking-wide text-gray-800">å–®å­—å¡å­¸ç¿’</h1>
            </div>
            <a href="index.html" class="text-gray-400 hover:text-gray-600 transition">
                <i class="fas fa-home text-xl"></i>
            </a>
        </div>
        
        <div class="border-t border-gray-100">
            <div class="max-w-5xl mx-auto px-4 py-3 flex gap-2 overflow-x-auto scrollbar-hide" id="category-bar">
                <button onclick="filterCards('ALL')" class="px-4 py-1.5 rounded-full bg-gray-800 text-white text-sm font-bold whitespace-nowrap hover:bg-gray-700 transition">å…¨éƒ¨</button>
                <button onclick="filterCards('animal')" class="px-4 py-1.5 rounded-full bg-white border border-gray-200 text-gray-600 text-sm font-bold whitespace-nowrap hover:border-primary hover:text-primary transition">å‹•ç‰© ğŸ¦</button>
                <button onclick="filterCards('fruit')" class="px-4 py-1.5 rounded-full bg-white border border-gray-200 text-gray-600 text-sm font-bold whitespace-nowrap hover:border-primary hover:text-primary transition">æ°´æœ ğŸ</button>
                <button onclick="filterCards('color')" class="px-4 py-1.5 rounded-full bg-white border border-gray-200 text-gray-600 text-sm font-bold whitespace-nowrap hover:border-primary hover:text-primary transition">é¡è‰² ğŸ¨</button>
                <button onclick="filterCards('body')" class="px-4 py-1.5 rounded-full bg-white border border-gray-200 text-gray-600 text-sm font-bold whitespace-nowrap hover:border-primary hover:text-primary transition">èº«é«” ğŸ‘€</button>
            </div>
        </div>
    </header>

    <main class="flex-grow p-4 max-w-5xl mx-auto w-full">
        
        <div class="text-center mb-6 animate-bounce">
            <span class="inline-block bg-yellow-100 text-yellow-700 px-4 py-2 rounded-full text-sm font-bold shadow-sm border border-yellow-200">
                ğŸ‘‡ é»æ“Šå¡ç‰‡è½è½çœ‹æ€éº¼å”¸ï¼
            </span>
        </div>

        <div id="error-msg" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4 text-center">
            <strong class="font-bold">âš ï¸ è®€å–ä¸åˆ° data.js</strong>
            <p class="text-sm mt-1">è«‹ç¢ºèª data.js æª”æ¡ˆæ˜¯å¦å­˜åœ¨æ–¼åŒä¸€ç›®éŒ„ä¸‹ã€‚</p>
        </div>

        <div id="cards-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 pb-20">
            </div>

    </main>

    <script src="data.js"></script>

    <script>
        // åˆå§‹åŒ–
        window.onload = function() {
            // æª¢æŸ¥è³‡æ–™æ˜¯å¦è¼‰å…¥æˆåŠŸ
            if (typeof window.VOCAB_LIST === 'undefined' || !Array.isArray(window.VOCAB_LIST)) {
                document.getElementById('error-msg').classList.remove('hidden');
                return;
            }
            
            // é è¨­é¡¯ç¤ºå…¨éƒ¨
            renderCards(window.VOCAB_LIST);
        };

        // æ¸²æŸ“å¡ç‰‡
        function renderCards(data) {
            const container = document.getElementById('cards-container');
            container.innerHTML = ''; // æ¸…ç©ºèˆŠå…§å®¹

            data.forEach(item => {
                const card = document.createElement('div');
                card.className = 'vocab-card bg-white rounded-2xl p-6 flex flex-col items-center justify-center relative overflow-hidden';
                
                // é»æ“Šç™¼éŸ³
                card.onclick = () => speak(item.word);

                card.innerHTML = `
                    <div class="absolute top-3 right-3 text-gray-300">
                        <i class="fas fa-volume-up"></i>
                    </div>
                    <div class="text-6xl mb-4 filter drop-shadow-sm transform transition-transform group-hover:scale-110">${item.icon}</div>
                    <div class="text-2xl font-game font-bold text-gray-800 tracking-wide mb-1">${item.word}</div>
                    <div class="text-sm text-gray-500 font-bold bg-gray-100 px-3 py-1 rounded-full">${item.cn}</div>
                `;
                container.appendChild(card);
            });
        }

        // ç¯©é¸åŠŸèƒ½
        function filterCards(category) {
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼ (ç°¡å–®å¯¦ä½œï¼šé‡ç½®æ‰€æœ‰ï¼Œå†äº®èµ·ç•¶å‰)
            const buttons = document.querySelectorAll('#category-bar button');
            buttons.forEach(btn => {
                // é€™è£¡ç°¡åŒ–æ¨£å¼åˆ‡æ›é‚è¼¯ï¼Œå¯¦éš›å°ˆæ¡ˆå¯åšå¾—æ›´ç´°ç·»
                if(btn.innerText.includes(category === 'ALL' ? 'å…¨éƒ¨' : category) || (category!=='ALL' && btn.innerText.toLowerCase().includes(category))) {
                    btn.className = "px-4 py-1.5 rounded-full bg-gray-800 text-white text-sm font-bold whitespace-nowrap transition shadow-md";
                } else {
                    btn.className = "px-4 py-1.5 rounded-full bg-white border border-gray-200 text-gray-600 text-sm font-bold whitespace-nowrap hover:border-primary hover:text-primary transition";
                }
            });

            if (category === 'ALL') {
                renderCards(window.VOCAB_LIST);
            } else {
                // æ¨¡ç³Šæ¯”å°ï¼Œè®“åˆ†é¡æ›´å½ˆæ€§ (ä¾‹å¦‚ 'animal' ä¹Ÿèƒ½æŠ“åˆ° 'animals')
                const filtered = window.VOCAB_LIST.filter(item => item.cat.includes(category));
                renderCards(filtered);
            }
        }

        // ç™¼éŸ³å‡½å¼
        function speak(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text.toLowerCase());
                u.lang = 'en-US';
                u.rate = 0.8;
                window.speechSynthesis.speak(u);
            }
        }
    </script>
</body>
</html>