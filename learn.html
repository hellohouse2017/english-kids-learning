<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level 1: å–®å­—åœ–é‘‘</title>
    <link rel="stylesheet" href="style.css">
    <script src="data.js"></script>
</head>
<body>
    <nav class="game-hud" style="justify-content: space-between; display: flex; align-items: center;">
        <span style="font-size: 1.2rem; font-weight: bold; color: #5d4037;">ğŸ“– å–®å­—åœ–é‘‘</span>
        <a href="index.html" class="btn-home">ğŸ  å›é¦–é </a>
    </nav>

    <div class="container">
        <p style="margin: 20px 0; color: #795548;">é»æ“Šå¡ç‰‡è½è½çœ‹æ€éº¼å”¸ï¼(Click to listen)</p>
        <div id="vocab-container"></div>
        <footer class="game-footer">
            <div class="footer-content">
                <div class="date-box">ğŸ•’ æ›´æ–°ï¼š<span id="last-updated">...</span></div>
            </div>
        </footer>
    </div>

    <script>
        function loadVocab() {
            if (typeof VOCAB_DB === 'undefined') return;
            const rawData = VOCAB_DB['grade3'];
            const categories = {
                "animal": "ğŸ¶ å‹•ç‰© (Animals)",
                "food": "ğŸ é£Ÿç‰© (Food)",
                "color": "ğŸ¨ é¡è‰² (Colors)",
                "number": "ğŸ”¢ æ•¸å­— (Numbers)",
                "body": "ğŸ–ï¸ èº«é«” (Body)",
                "item": "ğŸ’ ç”¨å“ (Items)",
                "family": "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶åº­ (Family)"
            };
            const groupedData = {};
            rawData.forEach(item => {
                const catName = categories[item.cat] || "å…¶ä»–";
                if (!groupedData[catName]) groupedData[catName] = [];
                groupedData[catName].push({ w: item.word, i: item.icon, c: item.cn });
            });

            const container = document.getElementById('vocab-container');
            for (const [category, words] of Object.entries(groupedData)) {
                const title = document.createElement('h2');
                title.style.cssText = "background:#fff; padding:10px 20px; border-radius:20px; color:#ff9800; display:inline-block; margin-top:30px;";
                title.innerText = category;
                container.appendChild(title);

                const grid = document.createElement('div');
                grid.className = 'pool-container'; grid.style.marginBottom = "20px";

                words.forEach(item => {
                    const card = document.createElement('div');
                    card.style.cssText = "background:white; border:2px solid #ddd; border-radius:15px; padding:15px; width:120px; cursor:pointer; box-shadow:0 4px 0 #ddd; transition:0.1s;";
                    card.onclick = () => { card.style.transform = "scale(0.95)"; setTimeout(()=>card.style.transform="scale(1)",100); speak(item.w); };
                    card.innerHTML = `<div style="font-size:3rem; margin-bottom:5px;">${item.i}</div><div style="font-weight:bold; color:#333;">${item.w}</div><div style="font-size:0.9rem; color:#888;">${item.c}</div>`;
                    grid.appendChild(card);
                });
                container.appendChild(grid);
            }
        }

        function speak(text) { window.speechSynthesis.cancel(); const u = new SpeechSynthesisUtterance(text.toLowerCase()); u.lang='en-US'; window.speechSynthesis.speak(u); }
        window.onload = loadVocab;
        const date = new Date(document.lastModified);
        document.getElementById('last-updated').innerText = `${date.getFullYear()}/${(date.getMonth()+1).toString().padStart(2,'0')}/${date.getDate().toString().padStart(2,'0')}`;
    </script>
</body>
</html>